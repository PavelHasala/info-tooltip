<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Tooltip info bubble</title>
  <style type="text/css" media="screen">
    body {
      background-color: #333;
      color: #fff;
    }
    input {
      padding: 10px;
      font-size: 13px;
      margin: 20px 0;
    }
    input[name='centered'] {
      margin-left: 300px;
    }
    fieldset { width: 200px; float: left; margin-bottom: 10px; }
    hr { clear: both; }
  </style>
  <script src="./tib.bundle.js"></script>
  <script>
    readystate.complete(function () {
      console.log(1)
      TIB.subscribe( 'tooltip_id', document.querySelector('#show-tooltip') )
    })
  </script>
</head>
<body>
  <fieldset>
    <legend><label>direction: </label></legend>
    <select name="direction" id="direction">
      <option value="right">right</option>
      <option value="left">left</option>
      <option value="bottom">bottom</option>
      <option value="top">top</option>
    </select>
  </fieldset>

  <fieldset>
    <legend><label>position:</label></legend>
    <select name="position" id="position">
      <option value="start">start</option>
      <option value="middle">middle</option>
      <option value="end">end</option>
    </select>
  </fieldset>
  <hr>

  <h1>Tooltip info bubbliny</h1>

    <input name="test" data-tib-content="Do políčka zadejte počátečníh 6 číslic z Vaší karty, která naleznete na přední straně." class="ti-bubble" data-tib-event="focus" data-tib-direction="right" data-tib-position="middle">

  <hr>

    <span data-tib-content="Do políčka zadejte poslední." class="ti-bubble" data-tib-direction="right" data-tib-position="middle" data-tib-id="tooltip_id" style="font-size: 2em; margin-left: 50%; margin-right: 100px">O</span>

    <input type="text" id="show-tooltip" data-tib-event="focus" data-tib-id="tooltip_id">
  <hr>

    <span style="margin-left: 0px;" class="ti-bubble" title="Do políčka zadejte počátečníh 6 číslic z Vaší karty, která naleznete na přední straně." data-tib-direction="right" data-tib-position="middle">Text s tootlupem</span>
  
  <hr>

    <span data-tib-content="Do políčka zadejte poslední." class="ti-bubble" data-tib-direction="right" data-tib-position="middle" style="font-size: 2em; margin-left: 90%;">O</span>
  
  <hr>

    <span style="margin-left: 200px;" class="ti-bubble" title="text text text bla" data-tib-direction="right" data-tib-position="middle">Text s tootlupem</span>

  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>

  <!--Object.assign -->
  <script>
    if (!Object.assign) {
      Object.defineProperty(Object, 'assign', {
        enumerable: false,
        configurable: true,
        writable: true,
        value: function(target) {
          'use strict';
          if (target === undefined || target === null) {
            throw new TypeError('Cannot convert first argument to object');
          }

          var to = Object(target);
          for (var i = 1; i < arguments.length; i++) {
            var nextSource = arguments[i];
            if (nextSource === undefined || nextSource === null) {
              continue;
            }
            nextSource = Object(nextSource);

            var keysArray = Object.keys(Object(nextSource));
            for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {
              var nextKey = keysArray[nextIndex];
              var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
              if (desc !== undefined && desc.enumerable) {
                to[nextKey] = nextSource[nextKey];
              }
            }
          }
          return to;
        }
      });
    }
  </script>
  <script>
    var _directionSel = document.getElementById('direction')
    var _positionSel = document.getElementById('position')

    function setData () {
      var _tis = document.querySelectorAll('.ti-bubble')
      var _i = 0
      var _length = _tis.length
  
      for (_i, _length; _i < _length; _i++) {
        var _tooltip = _tis[_i]


        var _direction = _directionSel.options[_directionSel.selectedIndex]
        var _position = _positionSel.options[_positionSel.selectedIndex]

        _tooltip.setAttribute('data-tib-direction', _direction.value)
        _tooltip.setAttribute('data-tib-position', _position.value)

        // console.log(_direction.value, _position.value)
        
        localStorage.setItem('position', _position.index || 0)
        localStorage.setItem('direction', _direction.index || 0)
      } 
    }

    _directionSel.selectedIndex = localStorage.getItem('direction')
    _positionSel.selectedIndex = localStorage.getItem('position')

    _directionSel.addEventListener('change', function () { setData(); window.location.reload() } )
    _positionSel.addEventListener('change',  function () { setData(); window.location.reload() } )
    
    setData()
  </script>
</body></html>